!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){t.exports=i.p+"index.html"},function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.r(e);var o=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isModified=!1,this._canvas=e,this._childs=[],this._parent=null,this._context=null,this._x=0,this._y=0,this._canvasRatio=2,this.onContext=!1,this.drawMethods={fillRect:function(t,e){i.context.fillStyle=e&&e.fillStyle?e.fillStyle:null,i.context.strokeStyle=e&&e.strokeStyle?e.strokeStyle:null,i.context.fillRect(t.x*i._canvasRatio,t.y*i._canvasRatio,t.width*i._canvasRatio,t.height*i._canvasRatio)},moveTo:function(t,e){i.context.moveTo(t*i._canvasRatio,e*i._canvasRatio)},lineTo:function(t,e,n){i.context.strokeStyle=n&&n.strokeStyle?n.strokeStyle:null,i.context.lineWidth=n&&n.lineWidth?n.lineWidth*i._canvasRatio:1*i._canvasRatio,i.context.lineTo(t*i._canvasRatio,e*i._canvasRatio)},arc:function(t,e,n,o,s,r){i.context.strokeStyle=r&&r.strokeStyle?r.strokeStyle:null,i.context.fillStyle=r&&r.fillStyle?r.fillStyle:null,i.context.lineWidth=r&&r.lineWidth?r.lineWidth*i._canvasRatio:1*i._canvasRatio,i.context.arc(t*i._canvasRatio,e*i._canvasRatio,n*i._canvasRatio,o,s)},fillText:function(t,e,n,o){i.context.strokeStyle=o&&o.strokeStyle?o.strokeStyle:null,i.context.fillStyle=o&&o.fillStyle?o.fillStyle:null,i.context.lineWidth=o&&o.lineWidth?o.lineWidth*i._canvasRatio:1*i._canvasRatio,o&&o.font&&(i.context.font=Math.round(o.font.size*i._canvasRatio)+"px "+o.font.family),i.context.fillText(t,e*i._canvasRatio,n*i._canvasRatio)},roundRect:function(t,e,n){i.context.strokeStyle=n&&n.strokeStyle?n.strokeStyle:null,i.context.fillStyle=n&&n.fillStyle?n.fillStyle:null,i.context.lineWidth=n&&n.lineWidth?n.lineWidth*i._canvasRatio:1*i._canvasRatio,i.context.roundRect(t.x*i._canvasRatio,t.y*i._canvasRatio,t.width*i._canvasRatio,t.height*i._canvasRatio,e*i._canvasRatio)}}}var e,i,o;return e=t,(i=[{key:"beforeDraw",value:function(){this.context.save(),this.context.translate(Math.round(this._x*this._canvasRatio),Math.round(this._y*this._canvasRatio))}},{key:"setModified",value:function(){!function t(e){e._parent?t(e._parent):e._isModified=!0}(this)}},{key:"draw",value:function(){}},{key:"afterDraw",value:function(){this.context.restore()}},{key:"render",value:function(){this.context?(this.onContext||(this.onContext=!0,this.onAddedOnContext()),this.beforeDraw(),this.draw(),this._childs.forEach(function(t){t.render()}),this.afterDraw()):this.onContext=!1}},{key:"updatePositions",value:function(){this.update(),this._childs.forEach(function(t){t.updatePositions()})}},{key:"update",value:function(){}},{key:"onAddedOnContext",value:function(){}},{key:"addChild",value:function(t){t._parent=this,t._canvasRatio=this._canvasRatio,this._childs.push(t)}},{key:"removeChild",value:function(t){if(t._parent===this){t._parent=null;var e=this._childs.indexOf(t);e>=0&&this._childs.splice(1,e)}}},{key:"hexToRgb",value:function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,n){return e+e+i+i+n+n});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),toRGB:function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},toRGBA:function(t){return"rgba("+this.r+", "+this.g+", "+this.b+", "+t+")"}}:null}},{key:"beforeDestroy",value:function(){}},{key:"destroy",value:function(){this._childs.forEach(function(t){t.destroy()}),this.beforeDestroy()}},{key:"context",get:function(){return this._context?this._context:this._parent?this._parent.context:null}}])&&n(e.prototype,i),o&&n(e,o),t}();o._minFPS=40;var s=o;function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.themes=null,this.currentTheme=null,this.listeners=[]}var e,i,n;return e=t,(i=[{key:"setThemes",value:function(t,e){this.themes=t,this.selectTheme(e)}},{key:"selectTheme",value:function(t){this.currentTheme=t,this.callOnThemeChange()}},{key:"callOnThemeChange",value:function(){var t=this;this.listeners.forEach(function(e){e.callback&&e.callback(t.themes[t.currentTheme])})}},{key:"addOnThemeChangeListener",value:function(t){this.listeners.push({callback:t}),this.currentTheme&&t(this.themes[this.currentTheme])}}])&&r(e.prototype,i),n&&r(e,n),t}());function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(){var t,i,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(t=!(n=c(e).call(this))||"object"!==h(n)&&"function"!=typeof n?u(i):n).width=0,t.height=0,t.value=0,t.labelValue="",t.opaque=0,t.visible=!0,t.colors={textRGB:t.hexToRgb("#ffffff"),lineRGB:t.hexToRgb("#ffffff")},a.addOnThemeChangeListener(t.onThemeChange.bind(u(t))),t}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,s),i=e,(n=[{key:"onThemeChange",value:function(t){this.colors.textRGB=this.hexToRgb(t.yAxis.textColor),this.colors.lineRGB=this.hexToRgb(t.yAxis.lineColor)}},{key:"setValue",value:function(t){this.value=t,t>=1e6?this.labelValue=(t/1e6).toFixed(3)+"M":t>=1e3?(this.labelValue=(t/1e3).toFixed(2),"00"===this.labelValue.substr(-2,2)&&(this.labelValue=t/1e3),this.labelValue+="K"):this.labelValue=t}},{key:"setWidth",value:function(t){this.width=t}},{key:"setHeight",value:function(t){this.height=t}},{key:"draw",value:function(){this.drawMethods.fillText(this.labelValue,0,this.height-10,{font:{size:12,family:"Arial"},fillStyle:this.colors.textRGB.toRGBA(this.opaque)}),this.context.beginPath(),this.drawMethods.moveTo(0,this.height),this.drawMethods.lineTo(this.width,this.height,{fillStyle:this.colors.lineRGB.toRGBA(this.opaque.toFixed(2)),strokeStyle:this.colors.lineRGB.toRGBA(this.opaque.toFixed(2)),lineWidth:1}),this.context.closePath(),this.context.stroke()}}])&&l(i.prototype,n),o&&l(i,o),e}();function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var m=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=v(this,b(e).call(this))).lines={a:{canvasObject:new d,val:0},b:{canvasObject:new d,val:0}},t.addChild(t.lines.a.canvasObject),t.addChild(t.lines.b.canvasObject),t.selectedLine=null,t.direction="",t.value=null,t.toValue=null,t.width=null,t.height=0,t.delta=0,t.speed=3,t.inanimation=!1,t.firstTime=!1,t}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(e,s),i=e,(n=[{key:"setValue",value:function(t){if(this.inanimation)this.toValue=t;else if(this.value!==t){0===this.value||null===this.value?this.firstTime=!0:this.firstTime=!1,this.value=t,this.toValue=null,this.to&&(clearTimeout(this.to),this.to=null),this.selectedLine=this.selectedLine!==this.lines.a?this.lines.a:this.lines.b,this.selectedLine.val=t,this.selectedLine.canvasObject.setValue(t);var e=this.selectedLine===this.lines.a?this.lines.b:this.lines.a;this.selectedLine.val>e.val?(this.selectedLine.canvasObject._y=e.canvasObject._y-this.height,this.delta=this.height):(this.selectedLine.canvasObject._y=e.canvasObject._y+this.height,this.delta=-this.height)}}},{key:"update",value:function(){this.firstTime?this.selectedLine.canvasObject._y=0:this.selectedLine.canvasObject._y+=(0-this.selectedLine.canvasObject._y)/5,Math.abs(this.selectedLine.canvasObject._y)>.1?(this.inanimation=!0,this.setModified()):this.inanimation=!1,null!==this.toValue&&this.setValue(this.toValue);var t=this.selectedLine===this.lines.a?this.lines.b:this.lines.a;t._y=this.selectedLine.canvasObject._y+this.delta,this.selectedLine.canvasObject.opaque+=(1-this.selectedLine.canvasObject.opaque)/4,this.selectedLine.val<0&&(this.selectedLine.canvasObject.opaque=0),t.canvasObject.opaque+=(0-t.canvasObject.opaque)/4}},{key:"draw",value:function(){}},{key:"setWidth",value:function(t){this.width=t,this.lines.a.canvasObject.setWidth(t),this.lines.b.canvasObject.setWidth(t)}},{key:"setHeight",value:function(t){this.height=t,this.lines.a.canvasObject.setWidth(t),this.lines.b.canvasObject.setWidth(t)}},{key:"createElements",value:function(){}}])&&y(i.prototype,n),o&&y(i,o),e}();function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _(t,e){return!e||"object"!==x(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=_(this,k(e).call(this)))._modNumbers=[1,10,20,50,100,300,500,1e3,5e3,1e4,5e4,1e5,1e6],t.lineHeight=0,t.lineWidth=0,t.height=0,t.lines=[],t.linesCount=5,t.direction="up",t.range={from:0,to:0,delta:0},t.padding=0,t.prevTo=0,t.createLines(),t.scale=.9,t}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,s),i=e,(n=[{key:"setRange",value:function(t,e){var i=10;this._modNumbers.forEach(function(t){Math.floor(e/t)>2&&(i=t)});var n=t%i,o=e%i;0!==n&&0!==t&&(t-=n),0!==o&&(e+=i-o);var s=e/this.linesCount;s%10!=0&&(e=(s+=10-s%10)*this.linesCount),this.prevTo!==this.range.to&&(this.prevTo>this.range.to?this.direction="up":this.direction="down",this.prevTo=this.range.to),this.range.from=t,this.range.to=e,this.range.delta=s,this.updateLines()}},{key:"setLinesCount",value:function(t){this.linesCount=t,this.createLines(),this.updateLines()}},{key:"createLines",value:function(){var t=this;this.lines.forEach(function(e){t.removeChild(e)}),this.lines=[];for(var e=0;e<=this.linesCount;e++){var i=new m;this.addChild(i),this.lines.push(i)}}},{key:"update",value:function(){this._x=this.padding}},{key:"draw",value:function(){}},{key:"setLinesWidth",value:function(t){this.lineWidth=t,this.updateLines()}},{key:"setHeight",value:function(t){this.height=t}},{key:"updateLines",value:function(){var t=this;this.lineHeight=this.height/this.linesCount,this.lines.forEach(function(e,i){e.setHeight(t.lineHeight),e.setWidth(t.lineWidth-2*t.padding),e._x=0,e._y=t.height-Math.round(i*t.lineHeight*t.scale),e.direction=t.direction,e.setValue(Math.round(t.range.from+t.range.delta*i))})}}])&&w(i.prototype,n),o&&w(i,o),e}();function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var j=function(t){function e(){var t,i,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(t=!(n=T(e).call(this))||"object"!==O(n)&&"function"!=typeof n?L(i):n).width=0,t.height=0,t.value=0,t.opaque=0,t.visible=!1,t.positionValue=0,t.image=new Image,t.colors={textColor:t.hexToRgb("#efefef")},a.addOnThemeChangeListener(t.onThemeChange.bind(L(t))),t}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(e,s),i=e,(n=[{key:"onThemeChange",value:function(t){this.colors.textColor=this.hexToRgb(t.xAxis.textColor)}},{key:"setValue",value:function(t){this.value=t}},{key:"setPositionValue",value:function(t){this.positionValue=t}},{key:"setWidth",value:function(t){this.width=t}},{key:"setHeight",value:function(t){this.height=t}},{key:"draw",value:function(){this.visible?this.opaque+=(1-this.opaque)/3:this.opaque+=(0-this.opaque)/5,this._x>-60&&this._x<this.context.canvas.width&&this.opaque>.1&&this.drawMethods.fillText(this.value.toString(),0,15,{font:{size:12,family:"Arial"},fillStyle:this.colors.textColor.toRGBA(this.opaque)})}}])&&S(i.prototype,n),o&&S(i,o),e}();function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function A(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function V(t){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var B=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=A(this,V(e).call(this))).period={from:0,to:0,duration:null},t._monthes=[],t.visiblePerscents=.5,t.viewportPositionPercents=0,t.maxLabelWidth=60,t.maxVisibleLabels=0,t.width=0,t.labels=[],t.hiddenLabels=[],t.ratio=0,t}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(e,s),i=e,(n=[{key:"setWidth",value:function(t){this.width=t,this.checkLabelsForVisibility()}},{key:"setPeriod",value:function(t,i,n){var o=this;n||(n=e._labelTypes.DAY),this.period.from=t,this.period.to=i,null===this.period.duration?(this.firstTime=!0,this.period.duration=0):this.firstTime=!1,this.labels&&(this.labels.forEach(function(t){o.removeChild(t)}),this.labels=[],this.hiddenLabels=[]);var s=n===e._labelTypes.MONTH?2592e6:864e5,r=i-t,a=Math.floor(r/s);this.period.duration=r;for(var h=0;h<a;h++){var l=new Date(t+s*h),c=this._monthes[l.getMonth()]+" "+l.getDate(),u=new j;this.addChild(u),u.setValue(c),u.setPositionValue(s*h),this.labels.push(u)}}},{key:"update",value:function(){var t=this;if(this.period.duration){this.ratio=this.width/(this.period.duration*this.visiblePerscents);var e=0;this._childs.forEach(function(i){var n=i.positionValue*t.ratio-t.period.duration*t.ratio*t.viewportPositionPercents;t.firstTime,i._x=n,e+=Math.abs(n-i._x)}),e/this._childs.length>.2&&this.setModified(),this.checkLabelsForVisibility()}}},{key:"draw",value:function(){}},{key:"checkLabelsForVisibility",value:function(){var t=this,e=!0;if(this.maxVisibleLabels=Math.floor(this.period.duration*this.ratio/this.maxLabelWidth),this.period.duration>0&&this.maxVisibleLabels>0){if(this.labels.length>this.maxVisibleLabels){for(var i=[],n=[],o=0;o<this.labels.length;o++){var s=this.labels[o];(o+1)%2==0?(s.visible=!1,n.push(s)):(s.visible=!1,i.push(s))}this.labels=i,this.hiddenLabels.push(n),e=!1}else if(this.labels.length<this.maxVisibleLabels){var r=this.hiddenLabels.length>0?this.hiddenLabels[this.hiddenLabels.length-1]:null;if(r&&r.length+this.labels.length<this.maxVisibleLabels){(r=this.hiddenLabels.pop()).forEach(function(e){t.labels.indexOf(e)<0&&(e.visible=!0,t.labels.push(e))});var a=[];this.labels=this.labels.sort(function(t,e){return t.positionValue-e.positionValue}),this.labels.forEach(function(t){a.push(t)}),this.labels=a,e=!1}}e&&this.labels.filter(function(t){return t.visible=!0})}}}])&&M(i.prototype,n),o&&M(i,o),e}();B._labelTypes={MONTH:"month",DAY:"day"};var z=B;function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var H=function(t){function e(){var t,i,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(t=!(n=I(e).call(this))||"object"!==D(n)&&"function"!=typeof n?G(i):n).maxWidth=0,t.height=0,t.width=0,t.padding=0,t.viewPercents=0,t.positionPercents=0,t.isMouseDown=!1,t.isDrag=!1,t.cursor="auto",t.drag={startPosition:{x:0,y:0},offset:{x:0,y:0}},t.resize={left:!1,startX:0,startViewPercents:0},t.isResize=!1,t.colors={bgColor:"rgb(221, 234, 243)",viewportColor:"#ffffff"},t.clickWidth=10,a.addOnThemeChangeListener(t.onThemeChange.bind(G(t))),t}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}(e,s),i=e,(n=[{key:"onThemeChange",value:function(t){this.colors.bgColor=this.hexToRgb(t.viewController.navbar.backgroundColor).toRGB(),this.colors.viewportColor=this.hexToRgb(t.viewController.navbar.viewportColor).toRGB()}},{key:"onAddedOnContext",value:function(){this.context.canvas.addEventListener("mousedown",this.onMouseDown.bind(this),!1),document.addEventListener("mouseup",this.onMouseUp.bind(this),!1),this.context.canvas.addEventListener("mousemove",this.onMouseMove.bind(this),!1)}},{key:"onMouseDown",value:function(t){var e=this.context.canvas.getBoundingClientRect(),i=t.clientX-e.x-this.padding,n=t.clientY-e.y;this.isDrag=!1,this.isResize=!1,i>this._x&&i<this._x+this.width&&n>this._parent._y&&n<this._parent._y+this._parent.height&&(this.isMouseDown=!0,i>this._x&&i<this._x+this.clickWidth?(this.isResize=!0,this.resize.left=!0,this.resize.xBorder=this._x+this.width-3*this.clickWidth,this.resize.startX=i,this.resize.offsetX=this._x,this.resize.offsetWidth=this.width):i>this._x+this.width-this.clickWidth&&i<this._x+this.width?(this.isResize=!0,this.resize.left=!1,this.resize.startX=i,this.resize.offsetX=this._x-i,this.resize.offsetWidth=this.width,this.resize.xBorder=this._x+2*this.clickWidth):(this.isDrag=!0,this.drag.startPosition={x:i,y:n},this.drag.offset={x:i-this._x,y:n-this._parent._y})),this.setModified()}},{key:"onMouseMove",value:function(t){var e=this.context.canvas.getBoundingClientRect(),i=t.clientX-e.x-this.padding,n=t.clientY-e.y;if(this.isDrag){this.drag.startPosition.x,this.drag.startPosition.y;this._x=i-this.drag.offset.x,this._x<0&&(this._x=0),this._x>this.maxWidth-this.width&&(this._x=this.maxWidth-this.width),this.setModified()}else if(this.isResize){var o=this._x;if(this.resize.left){var s=this.resize.startX-i,r=this.resize.offsetWidth+s;(o=this.resize.offsetX-s)>this.resize.xBorder?o=this.resize.xBorder:r>this.clickWidth&&(o<0&&(s+=o,r+=o,o=this.resize.offsetX-s),this.width=r)}else{var a=this.resize.startX-i,h=this.resize.offsetWidth-a,l=this._parent.width-this._x;if(h>l)a+=h-l;h>3*this.clickWidth&&(this.width=this.resize.offsetWidth-a)}this.viewPercents=this.width/this.maxWidth,this._x=o,this.setModified()}else this.width=this.maxWidth*this.viewPercents;n>this._parent._y&&n<this._parent._y+this.height?i>this._x&&i<this._x+this.clickWidth?this.cursor="w-resize":i>this._x+this.width-this.clickWidth&&i<this._x+this.width?this.cursor="e-resize":this.cursor="auto":this.cursor="auto"}},{key:"onMouseUp",value:function(t){this.isDrag=!1,this.isResize=!1,this.isMouseDown=!1}},{key:"setMaxWidth",value:function(t){this.maxWidth=t}},{key:"update",value:function(){this._x+this.width>this._parent.width&&(this._x=this._parent.width-this.width),this.width>this._parent.width&&(this.width=this._parent.width,this._x=0)}},{key:"draw",value:function(){this.drawMethods.fillRect({x:0,y:0,width:this.width,height:this.height},{fillStyle:this.colors.bgColor}),this.drawMethods.fillRect({x:5,y:1,width:this.width-10,height:this.height-2},{fillStyle:this.colors.viewportColor}),this.positionPercents=this._x/this.maxWidth,this.isResize||this.isDrag||(this.viewPercents=this.width/this.maxWidth),this.cursor&&(this.context.canvas.style.cursor=this.cursor)}}])&&F(i.prototype,n),o&&F(i,o),e}();function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Y(t){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var U=function(t){function e(){var t,i,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(t=!(n=Y(e).call(this))||"object"!==q(n)&&"function"!=typeof n?J(i):n).viewPortBar=null,t.colors={glass:"rgba(230, 230, 230, 0.6)",opacity:.5},a.addOnThemeChangeListener(t.onThemeChange.bind(J(t))),t}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(e,s),i=e,(n=[{key:"onThemeChange",value:function(t){this.colors.opacity=t.viewController.navbar.glassOpacity,this.colors.glass=this.hexToRgb(t.viewController.navbar.glassColor).toRGBA(this.colors.opacity)}},{key:"draw",value:function(){this.viewPortBar&&(this.drawMethods.fillRect({x:0,y:0,width:this.viewPortBar._x,height:this._parent.height},{fillStyle:this.colors.glass}),this.drawMethods.fillRect({x:this.viewPortBar._x+this.viewPortBar.width,y:0,width:this._parent.width-this.viewPortBar.width-this.viewPortBar._x,height:this._parent.height},{fillStyle:this.colors.glass}))}}])&&N(i.prototype,n),o&&N(i,o),e}();function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function et(t,e){return(et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var it=function(t){function e(t,i,n,o){var s,r,h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,h=Z(e).call(this),(s=!h||"object"!==K(h)&&"function"!=typeof h?tt(r):h).name=t,s.enabled=!0,s.opacity=0,s.higlightedX=null,s.ydata=i,s.xdata=n,s.xratio=1e-7,s.yratio=0,s.points=[],s.toPoints=[],s.highlightedPoint=null,s.options=o,s.color=o&&o.color?s.hexToRgb(o.color):{r:0,g:0,b:0},s.rgbColor="rgb("+s.color.r+", "+s.color.g+", "+s.color.b+")",s.backgroundColor="#ffffff",s.highlightedIndex=0,s.firstTime=!0,setTimeout(function(){s.firstTime=!1},500),a.addOnThemeChangeListener(s.onThemeChange.bind(tt(s))),s}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&et(t,e)}(e,s),i=e,(n=[{key:"onThemeChange",value:function(t){this.backgroundColor=t.backgroundColor}},{key:"highlightPoint",value:function(t){this.higlightedX=t}},{key:"unHighlightPoint",value:function(){this.higlightedX=null}},{key:"update",value:function(){var t=this;if(this.xdata){var e=this.options&&this.options.fadeSpeed?this.options.fadeSpeed:2,i=this.options&&this.options.speed?this.options.speed:2;this.enabled?(this.opacity+=(1-this.opacity)/e,1-this.opacity>.1?this.setModified():this.opacity=1):(this.opacity+=(0-this.opacity)/e,0-this.opacity>.1?this.setModified():this.opacity=0),this.highlightedIndex=-1;var n=this.xdata[0],o=this._parent?this._parent.width:0;this.xdata.forEach(function(e,s){var r=e-n,a=t.ydata[s],h=r*t.xratio,l=a*t.yratio;if(t.toPoints[s]={x:h,y:l},void 0===t.points[s]&&(t.points[s]={x:h,y:l,xValue:e,yValue:a,color:t.rgbColor}),t.points[s].y+=(t.toPoints[s].y-t.points[s].y)/i,t.points[s].x=t.toPoints[s].x,t.firstTime&&(t.points[s].x=t.toPoints[s].x,t.points[s].y=t.toPoints[s].y),null!==t.higlightedX){var c=Math.abs(t.points[s].x-t.higlightedX);o>c&&(o=c,t.highlightedIndex=s)}})}}},{key:"draw",value:function(){if(this.xdata&&(this.opacity>0||this.enabled)){this.context.beginPath(),this.context.strokeStyle=this.rgbaColor,this.context.lineWidth=this.options&&this.options.lineWidth?this.options.lineWidth:2;for(var t=!1,e=0,i=0;i<this.points.length;i++){Math.abs(this.toPoints[i].y-this.points[i].y)>.2?t=!0:this.points[i].y=this.toPoints[i].y;var n=this.points[i].x+this._parent._x;(!this._parent.mouseEnabled||n>-100&&n<this.context.canvas.width/this._canvasRatio+100)&&(0===e?this.drawMethods.moveTo(this.points[i].x,this._parent.height-this.points[i].y):this.drawMethods.lineTo(Math.floor(this.points[i].x),Math.floor(this._parent.height-this.points[i].y),{strokeStyle:this.rgbaColor,lineWidth:this.options&&this.options.lineWidth?this.options.lineWidth:2}),e++)}this.context.stroke(),t&&this.setModified(),this._parent.mouseEnabled&&(this.highlightedIndex>=0?(this.highlightedPoint=this.points[this.highlightedIndex],this.context.beginPath(),this.drawMethods.arc(Math.floor(this.highlightedPoint.x),Math.floor(this._parent.height-this.highlightedPoint.y),4,0,2*Math.PI,{strokeStyle:this.rgbaColor,fillStyle:this.backgroundColor,lineWidth:2}),this.context.fill(),this.context.stroke()):this.highlightedPoint=null)}}},{key:"getMaxYValue",value:function(t,e){var i=0;if(this.enabled)for(var n=0;n<this.xdata.length;n++){var o=this.xdata[n];o>=t&&o<=e&&i<this.ydata[n]&&(i=this.ydata[n])}return i}},{key:"rgbaColor",get:function(){return"rgba("+this.color.r+", "+this.color.g+", "+this.color.b+", "+this.opacity+")"}}])&&Q(i.prototype,n),o&&Q(i,o),e}();function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ht=function(t){function e(){var t,i,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(t=!(n=st(e).call(this))||"object"!==nt(n)&&"function"!=typeof n?rt(i):n).scale=1,t.list=[],t.xValues=null,t.maxValue=0,t.yRange=null,t.xPeriod=null,t.height=0,t.width=0,t.graphsWidth=0,t.padding=0,t.positionPercents=0,t.visiblePercents=1,t.mouseChartX=0,t.mouseX=0,t.mouseEnabled=!1,t.colors={lineColor:"rgba(0, 0, 0, 0.1)"},t.mouseOnChart=!1,a.addOnThemeChangeListener(t.onThemeChange.bind(rt(t))),t}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}(e,s),i=e,(n=[{key:"onThemeChange",value:function(t){this.colors.lineColor=this.hexToRgb(t.popup.currentValueLineColor).toRGB()}},{key:"enableMouse",value:function(){this.context.canvas.addEventListener("mousemove",this.onMouseMove.bind(this)),this.context.canvas.addEventListener("mouseleave",this.onMouseLeave.bind(this)),this.mouseEnabled=!0}},{key:"toogleGraph",value:function(t,e){this.list.forEach(function(i){i.name===t&&(i.enabled=!i.enabled,e&&(i.opacity=0))})}},{key:"getGraphs",value:function(){return this.list}},{key:"disableGraph",value:function(t){this.list.forEach(function(e){e.name===t&&(e.enabled=!1)})}},{key:"enableGraph",value:function(t){this.list.forEach(function(e){e.name===t&&(e.enabled=!0)})}},{key:"onMouseMove",value:function(t){if(this.mouseEnabled){this.mouseOnChart=!0;var e=this.context.canvas.getBoundingClientRect(),i=t.clientX-e.x-this._x,n=t.clientY-e.y-this._y;this.mouseChartX=t.clientX-e.x,this.mouseX=i,n>0&&n<this.height?(this.list.forEach(function(t){t.highlightPoint(i)}),this.setModified()):(this.list.forEach(function(t){t.unHighlightPoint()}),this.setModified())}}},{key:"onMouseLeave",value:function(t){this.mouseOnChart=!1,this.list.forEach(function(t){t.unHighlightPoint()}),this.setModified()}},{key:"getRange",value:function(t,e){var i=this;this.positionPercents=t,this.visiblePercents=e;var n=this.xPeriod.from+this.xPeriod.duration*t,o=this.xPeriod.from+this.xPeriod.duration*(t+e);return this.maxValue=0,this.list.forEach(function(t){var e=t.getMaxYValue(n,o);i.maxValue<e&&(i.maxValue=e)}),{from:0,to:this.maxValue,duration:this.maxValue}}},{key:"clearList",value:function(){var t=this;this.list.forEach(function(e){t.removeChild(e)}),this.list=[]}},{key:"addGraph",value:function(t,e,i){var n=new it(t,e,this.xValues,i);this.addChild(n),this.list.push(n)}},{key:"setXValues",value:function(t){t&&(this.xValues=t,this.maxValue=Math.max.apply(null,this.xValues))}},{key:"update",value:function(){var t=this;this.yRange&&(this.graphsWidth=(this.width-2*this.padding)/this.visiblePercents,this._x=-this.graphsWidth*this.positionPercents+this.padding,this.list.forEach(function(e){e.yratio=t.height/t.yRange.to*t.scale,e.xratio=t.graphsWidth/t.xPeriod.duration}))}},{key:"draw",value:function(){if(this.mouseOnChart&&this.mouseEnabled&&this._parent.popup)if(this.highlightedPoints.length>0){var t=this.highlightedPoints[0].point;this.context.beginPath(),this.drawMethods.moveTo(t.x,this.height),this.drawMethods.lineTo(t.x,0,{strokeStyle:this.colors.lineColor}),this.context.closePath(),this.context.stroke(),this._parent.popup&&(this._parent.popup.setPoints(this.highlightedPoints),this._parent.popup.xpos=this.mouseChartX)}else this._parent.popup&&this._parent.popup.clearPoints();else this._parent.popup&&this._parent.popup.clearPoints()}},{key:"highlightedPoints",get:function(){var t=[];return this.list.forEach(function(e){e.highlightedPoint&&e.enabled&&t.push({point:e.highlightedPoint,name:e.name})}),t}}])&&ot(i.prototype,n),o&&ot(i,o),e}();function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ct(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ut(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dt(t,e){return(dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ut(this,ft(e).call(this))).width=0,t.height=0,t.visiblePercents=.3,t.viewportPositionPercents=0,t.period={from:0,to:0,duration:0},t.yRange=null,t.viewPortBar=new H,t.addChild(t.viewPortBar),t.graphsList=new ht,t.graphsList._y=2,t.addChild(t.graphsList),t.glass=new U,t.addChild(t.glass),t.glass.viewPortBar=t.viewPortBar,t}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dt(t,e)}(e,s),i=e,(n=[{key:"setVisiblePercents",value:function(t){this.viewPortBar.width=this.width*t}},{key:"setSize",value:function(t,e){this.width=t,this.height=e,this.viewPortBar.setMaxWidth(t),this.viewPortBar.height=e}},{key:"draw",value:function(){if(this.graphsList){this.graphsList.xPeriod=this.period;var t=this.graphsList.getRange(0,1);t.to>0&&(this.graphsList.yRange=t),this.graphsList.height=this.height-4,this.graphsList.width=this.width}this.visiblePercents=this.viewPortBar.width/this.width,this.viewportPositionPercents=this.viewPortBar._x/this.width,this._y=this.context.canvas.height/this._canvasRatio-this.height}}])&&ct(i.prototype,n),o&&ct(i,o),e}();function yt(t){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bt(t){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mt(t,e){return(mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xt=function(t){function e(){var t,i,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(t=!(n=bt(e).call(this))||"object"!==yt(n)&&"function"!=typeof n?gt(i):n).value=0,t.name="",t.width=0,t.height=0,t.color="",t.colors={axisNameFont:{size:12,family:"Open Sans Condensed"},axisValueFont:{size:16,family:"Open Sans Condensed"}},a.addOnThemeChangeListener(t.onThemeChange.bind(gt(t))),t}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}(e,s),i=e,(n=[{key:"onThemeChange",value:function(t){this.colors.axisNameFont=t.popup.axisNameFont,this.colors.axisValueFont=t.popup.axisValueFont}},{key:"setValue",value:function(t,e,i){this.value=e,this.name=t,this.color=i,this.context.font="16px Arial";var n=this.context.measureText(e);this.width=n.width,this.height=n.height,this.context.font="12px Arial",n=this.context.measureText(t),this.width=n.width>this.width?n.width:this.width,this.height=n.height+15>this.height?n.height+15:this.height}},{key:"draw",value:function(){this.drawMethods.fillText(this.value.toString(),0,17,{font:this.colors.axisValueFont,fillStyle:this.color}),this.drawMethods.fillText(this.name,0,33,{font:this.colors.axisNameFont,fillStyle:this.color})}}])&&vt(i.prototype,n),o&&vt(i,o),e}();function wt(t){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ct(t,e){return(Ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ot=function(t){function e(){var t,i,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(t=!(n=kt(e).call(this))||"object"!==wt(n)&&"function"!=typeof n?Pt(i):n).points=null,t.items=[],t.xpos=0,t._y=30,t.height=68,t.width=0,t.prevWidth=0,t.dateString="",t._monthes=[],t._weekDays=[],t.colors={background:"rgba(255, 255, 255, 0.1)",date:"rgb(0,0,0)",dateFont:{size:16,family:"Open Sans Condensed"}},a.addOnThemeChangeListener(t.onThemeChange.bind(Pt(t))),t}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ct(t,e)}(e,s),i=e,(n=[{key:"onThemeChange",value:function(t){var e=this.hexToRgb(t.popup.backgroundColor),i=this.hexToRgb(t.popup.dateColor);this.colors.background=e.toRGBA(t.popup.backgroundOpacity),this.colors.date=i.toRGB(),this.colors.dateFont=t.popup.dateFont}},{key:"setPoints",value:function(t){if(!this.isSame(t)){this.points=t;var e=t[0].point,i=new Date(e.xValue);this.dateString=this._weekDays[i.getDay()]+", "+this._monthes[i.getMonth()]+" "+i.getDate(),this.createItems()}}},{key:"removeItems",value:function(){var t=this;this.items.forEach(function(e){t.removeChild(e)}),this.items=[]}},{key:"createItems",value:function(){var t=this;this.removeItems(),this.points.forEach(function(e){var i=new xt;t.addChild(i),i.setValue(e.name,e.point.yValue,e.point.color),t.items.push(i)})}},{key:"isSame",value:function(t){var e=!0;if(this.points)if(this.points.length!==t.length)e=!1;else{e=this.points.filter(function(e,i){return e.point.enabled&&e.point.xValue===t[i].point.xValue&&e.point.yValue===t[i].point.yValue}).length===this.points.length}else e=!1;return e}},{key:"clearPoints",value:function(){this.points=null}},{key:"draw",value:function(){var t=this;if(this.points){this.drawMethods.roundRect({x:0,y:0,width:this.width,height:this.height},10,{strokeStyle:"#000",lineWidth:.2,fillStyle:this.colors.background}),this.context.fill(),this.context.stroke(),this.drawMethods.fillText(this.dateString,10,20,{font:this.colors.dateFont,fillStyle:this.colors.date});var e=(this.context.canvas.width-this.width*this._canvasRatio)/this.context.canvas.width;this._x+=(this.xpos*e-this._x)/2}else this.removeItems();var i=0;this.items.forEach(function(t){t._y=25,t._x=i+10,i=t._x+t.width}),this.items.length>0&&(this.width=100,this.items.forEach(function(e){e._x+e.width>t.width&&(t.width=e._x+e.width),t.width+=10}))}}])&&_t(i.prototype,n),o&&_t(i,o),e}();function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Lt(t){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jt(t,e){return(jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rt=function(t){function e(t,i){var n,o,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,s=Lt(e).call(this),(n=!s||"object"!==St(s)&&"function"!=typeof s?Et(o):s)._fps=0,n._fpsList=[],n._fpsStartTime=null,n._modifiedLocked=!0,n._destroyed=!1,n.options=i,n.initOptions(),CanvasRenderingContext2D.roundRect||(CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,n,o){return i<2*o&&(o=i/2),n<2*o&&(o=n/2),this.beginPath(),this.moveTo(t+o,e),this.arcTo(t+i,e,t+i,e+n,o),this.arcTo(t+i,e+n,t,e+n,o),this.arcTo(t,e+n,t,e,o),this.arcTo(t,e,t+i,e,o),this.closePath(),this}),n._monthes=n.options.monthes?n.options.monthes:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n._weekDays=n.options.weekDays?n.options.weekDays:["Sun","Mon","Tue","Wed","Thr","Fri","Sat"],n.$el=t,n._canvas=document.createElement("canvas"),n.setSize(n.options.width,n.options.height),n._context=n._canvas.getContext("2d"),n._canvas.addEventListener("touchstart",function(t){var e=t.changedTouches[0];if(e){var i=new Event("mousedown");i.clientX=e.clientX,i.clientY=e.clientY,n._canvas.dispatchEvent(i)}t.preventDefault()}),n._canvas.addEventListener("touchmove",function(t){var e=t.changedTouches[0];if(e){var i=new Event("mousemove");i.clientX=e.clientX,i.clientY=e.clientY,n._canvas.dispatchEvent(i)}t.preventDefault()}),window.addEventListener("blur",function(){n.lockModified()}),window.addEventListener("focus",function(){n.lockModified()}),n._requestAnimationFrameId=null,n.$el.appendChild(n._canvas),n.createElements(),n._chartData=null,n.runAnimation(),n.colors={background:"rgb(255, 255, 255)"},n._canvas.addEventListener("mousedown",function(){n.setModified()}),n._canvas.addEventListener("mouseup",function(){n.setModified()}),n.setModified(),a.addOnThemeChangeListener(n.onThemeChange.bind(Et(n))),n}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jt(t,e)}(e,s),i=e,(n=[{key:"lockModified",value:function(){var t=this;this._modifiedLocked=!0,setTimeout(function(){t._modifiedLocked=!1},500)}},{key:"initOptions",value:function(){if(this.options||(this.options={}),this.options.padding||(this.options.padding=0),!this.options.width||!this.options.height){var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;this.options.width=t<500?t-15:500,this.options.height=e<770?e-220:500}this.options.yAxis||(this.options.yAxis={}),this.options.yAxis.linesCount||(this.options.yAxis.linesCount=5)}},{key:"setSize",value:function(t,e){this.options.width=t,this.options.height=e,this._canvas.width=t,this._canvas.height=e,this._canvas.style.width=this._canvas.width+"px",this._canvas.style.height=this._canvas.height+"px",this.yAxis&&this.yAxis.setLinesWidth(t),this.xAxis&&this.xAxis.setWidth(t),this.viewPortController&&this.viewPortController.setSize(t,57),this.graphsList&&(this.graphsList.width=t),this.lockModified()}},{key:"setYLinesCount",value:function(t){this.options.yAxis.linesCount=t,this.yAxis&&this.yAxis.setLinesCount(t),this.lockModified()}},{key:"onThemeChange",value:function(t){this.colors.background=this.hexToRgb(t.backgroundColor).toRGB(),this.setModified()}},{key:"setColorThemes",value:function(t,e){a.setThemes(t,e),this.setModified()}},{key:"selectTheme",value:function(t){a.selectTheme(t),this.setModified()}},{key:"createElements",value:function(){this.yAxis=new C,this.yAxis.setHeight(462),this.yAxis.setLinesWidth(this._canvas.width),this.yAxis.setLinesCount(this.options.yAxis.linesCount),this.addChild(this.yAxis),this.xAxis=new z,this.xAxis._monthes=this._monthes,this.xAxis._x=0,this.xAxis.setWidth(this._canvas.width),this.addChild(this.xAxis),this.viewPortController=new pt,this.viewPortController.setSize(this._canvas.width,57),this.viewPortController.setVisiblePercents(this.xAxis.visiblePerscents),this.addChild(this.viewPortController),this.graphsList=new ht,this.graphsList._y=this.yAxis._y,this.graphsList.height=this.yAxis.height,this.graphsList.width=this._canvas.width,this.addChild(this.graphsList),this.graphsList.enableMouse(),this.popup=new Ot,this.popup._monthes=this._monthes,this.popup._weekDays=this._weekDays,this.addChild(this.popup)}},{key:"runAnimation",value:function(){var t=this;!function e(){var i=performance.now()-t._fpsStartTime;if(t._fpsList.push(1e3/i),t._fpsList.length>10){t._fpsList.shift();var n=t._fpsList.reduce(function(t,e){return t+e});t._fps=n/t._fpsList.length}t.updatePositions(),t._modifiedLocked&&(t._isModified=!0),t._isModified&&t._fps>s._minFPS&&(t._isModified=!1,t.clear(),t.render()),t._destroyed||(t._requestAnimationFrameId=requestAnimationFrame(e)),t._fpsStartTime=performance.now()}()}},{key:"fix_dpi",value:function(){var t=this;if(this._context){var e={height:function(){return window.getComputedStyle(t._context.canvas).getPropertyValue("height").slice(0,-2)},width:function(){return window.getComputedStyle(t._context.canvas).getPropertyValue("width").slice(0,-2)}};this._canvas.setAttribute("width",e.width()*this._canvasRatio),this._canvas.setAttribute("height",e.height()*this._canvasRatio)}}},{key:"draw",value:function(){if(this.fix_dpi(),this.context.beginPath(),this.colors?this.context.fillStyle=this.colors.background:this.context.fillStyle="#ffffff",this.context.fillRect(0,0,this.context.canvas.width,this.context.canvas.height),this.context.closePath(),this.xAxis&&(this.xAxis.visiblePerscents=this.viewPortController.visiblePercents,this.xAxis.viewportPositionPercents=this.viewPortController.viewportPositionPercents,this.viewPortController.period=this.xAxis.period,this.viewPortController.yRange=this.yAxis.range,this.viewPortController._x=this.options.padding,this.viewPortController.setSize(this._canvas.width/this._canvasRatio-2*this.options.padding,57),this.viewPortController.viewPortBar.padding=this.options.padding,this.xAxis._y=this.viewPortController._y-30),this.yAxis&&(this.yAxis._y=this.xAxis._y-this.yAxis.height-6,this.yAxis.setHeight(this.xAxis._y),this.yAxis.padding=this.options.padding),this.graphsList){this.graphsList.xPeriod=this.xAxis.period,this.graphsList._y=this.yAxis._y,this.graphsList.height=this.yAxis.height,this.graphsList.scale=this.yAxis.scale,this.graphsList.padding=this.options.padding;var t=this.graphsList.getRange(this.viewPortController.viewportPositionPercents,this.viewPortController.visiblePercents);t.to>0&&this.yAxis.setRange(t.from,t.to),this.graphsList.yRange=this.yAxis.range}}},{key:"clear",value:function(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height)}},{key:"loadData",value:function(t,e){var i=this;fetch(t).then(function(t){t.json().then(function(t){console.log(t),i.createFromData(t[e])})})}},{key:"createFromData",value:function(t){var e=this;this._chartData=JSON.parse(JSON.stringify(t));var i=this._chartData.types,n=this._chartData.columns,o=this._chartData.colors,s=[],r=null;n.forEach(function(t){var n=t.shift(),a=i[n],h=o[n];switch(a){case"x":r=t;var l=Math.max.apply(null,t),c=Math.min.apply(null,t);e.xAxis.setPeriod(c,l);break;case"line":s.push({name:n,data:t,color:h})}}),this.graphsList.setXValues(r),this.viewPortController.graphsList.setXValues(r),this.graphsList.clearList(),this.viewPortController.graphsList.clearList(),s.forEach(function(t){e.graphsList.addGraph(t.name,t.data,{color:t.color,lineWidth:2,speed:5,fadeSpeed:3}),e.viewPortController.graphsList.addGraph(t.name,t.data,{color:t.color,lineWidth:1,speed:2,fadeSpeed:2})}),this.options&&this.options.callbacks&&this.options.callbacks.graphsCreated&&this.options.callbacks.graphsCreated(this,s),this.lockModified()}},{key:"toggleGraph",value:function(t){if(this.graphsList.toogleGraph(t),this.viewPortController.graphsList.toogleGraph(t,!0),this.options&&this.options.callbacks&&this.options.callbacks.graphsChanged){var e=this.viewPortController.graphsList.getGraphs(),i=[];e.forEach(function(t){i.push({name:t.name,enabled:t.enabled})}),this.options.callbacks.graphsChanged(this,i)}this.lockModified()}},{key:"setPadding",value:function(t){this.options.padding=t,this.lockModified()}},{key:"beforeDestroy",value:function(){this._context.canvas.parentElement.removeChild(this._context.canvas)}}])&&Tt(i.prototype,n),o&&Tt(i,o),e}();i(0);var Mt=document.getElementById("chart"),At=[document.getElementById("chart-1"),document.getElementById("chart-2"),document.getElementById("chart-3"),document.getElementById("chart-4")],Vt=[],Wt=document.getElementById("buttons"),Bt=document.getElementById("toogleThemeButton"),zt=document.getElementById("charts-buttons"),Dt=document.getElementById("setSizeButton"),Ft=document.getElementById("setLinesCountButton"),It=document.getElementById("setPaddingButton");Bt.addEventListener("click",function(t){Xt="day"===Xt?"night":"day",Gt.selectTheme(Xt),Vt.forEach(function(t,e){t.selectTheme(Xt)}),Bt.innerHTML="day"===Xt?"Switch to Night Mode":"Switch to Day Mode",document.body.setAttribute("class",Xt)}),Dt.addEventListener("click",function(){var t=parseInt(document.getElementById("widthValue").value),e=parseInt(document.getElementById("heightValue").value);Gt.setSize(t,e),console.log("[Chart] setSize("+t+", "+e+")")}),Ft.addEventListener("click",function(){var t=parseInt(document.getElementById("linesCountValue").value);Gt.setYLinesCount(t),console.log("[Chart] setYLinesCount("+t+")")}),It.addEventListener("click",function(){var t=parseInt(document.getElementById("paddingValue").value);Gt.setPadding(t),console.log("[Chart] setPadding("+t+")")});var Gt=new Rt(Mt,{callbacks:{graphsCreated:function(t,e){Wt.innerHTML="",e.forEach(function(e){var i=document.createElement("div");i.setAttribute("class","button enabled"),i.graphEnabled=!0,i.innerHTML='<div class="icon" style="background-color: '+e.color+'"></div><div class="name">'+e.name+"</div>",Wt.appendChild(i),i.addEventListener("click",function(){t.toggleGraph(e.name),i.graphEnabled=!i.graphEnabled,i.graphEnabled?i.setAttribute("class","button enabled"):i.setAttribute("class","button")})}),console.log("[Chart] graphsCreated",e)},graphsChanged:function(t,e){console.log("[Chart] graphsChanged",e)}}});At.forEach(function(t,e){Vt.push(new Rt(t))}),Gt.setColorThemes({day:{backgroundColor:"#ffffff",popup:{backgroundColor:"#ffffff",backgroundOpacity:.7,dateColor:"#000000",dateFont:{size:12,family:"Arial"},axisNameFont:{size:12,family:"Arial"},axisValueFont:{size:16,family:"Arial"},currentValueLineColor:"#dbe3e9"},yAxis:{textColor:"#818f99",lineColor:"#eaeef2"},xAxis:{textColor:"#88969f"},viewController:{navbar:{backgroundColor:"#ddeaf3",viewportColor:"#ffffff",glassColor:"#dce8ee",glassOpacity:.5}}},night:{backgroundColor:"#242f3e",popup:{backgroundColor:"#253241",backgroundOpacity:.7,dateColor:"#ffffff",dateFont:{size:12,family:"Arial"},axisNameFont:{size:12,family:"Arial"},axisValueFont:{size:16,family:"Arial"},currentValueLineColor:"#3e4d5d"},yAxis:{textColor:"#556879",lineColor:"#2a3645"},xAxis:{textColor:"#556879"},viewController:{navbar:{backgroundColor:"#40566b",viewportColor:"#242f3e",glassColor:"#1f2a38",glassOpacity:.5}}}},"day");var Xt="day",Ht=[];function qt(t){Ht.length>0&&Gt.createFromData(Ht[t])}fetch("/telegram-chart/static/chart_data.json").then(function(t){t.json().then(function(t){Ht=t,console.log("charts data",t);for(var e=function(t){var e=document.createElement("div");e.setAttribute("class","button "+(0===t?"enabled":"")),e.index=t,e.innerHTML='<div class="icon" style="background-color: #aaaa00"></div><div class="name">'+t+"</div>",zt.appendChild(e),e.addEventListener("click",function(){qt(e.index),Array.from(document.querySelectorAll("#charts-buttons .button")).forEach(function(t){t.setAttribute("class","button")}),e.setAttribute("class","button enabled")})},i=0;i<Ht.length;i++)e(i);qt(0),Vt.forEach(function(t,e){t.createFromData(Ht[e+1])})})})}]);
